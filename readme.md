# 简介

该项目的目的是在 BSV 链上创建大量交易进行压测，本项目为使用说明，执行代码本身不在本项目中。

# 使用说明

将比特币转入 sendTo.address 文件中提供的地址即可，程序会将转入的每一笔比特币消耗殆尽，直到金额小到无法交易（目前大约 0.000007 BSV）

## 详细流程与实现

1. 系统会监控 sendTo.address 中的地址是否有新的 Unspent 未花费交易。
2. 创建一笔交易，将未花费交易平均拆分到 N 个地址中去。
3. 等待该交易被确认。由于比特币客户端通常有 `too-long-mempool-chain` 限制，即未确认交易下衍生的交易，数量不能超过 23 个(左右)，所以需要等待确认。
4. 拆分交易被确认后，开始执行消耗交易的队列。
5. N 个地址开始各自给自己转账，直到金额小到无法交易，则记为灰尘交易放入队列。
6. 系统等待灰尘交易被确认后，将所有灰尘交易聚合再次放入 sendTo.address 地址，将剩余的钱再进行消耗。即走向了步骤 1。

本系统创建交易时的目的有三个。

1. 最多的交易数量
2. 最大的交易 size
3. 最低的手续费

基于此，手续费上选择了 0.00001010 BSV / KB。交易方式为自己转给自己，保证最多的交易数量。

## 性能

初步测试 TPS 为 80/s，可以通过提高线程池数量和加机器的方式提高。

另一方面的「性能」，即 交易金额/交易数 比，大概为 1 BSV 可以产生 438000 笔交易, 每笔交易按最小 size （192 bytes）算，约为 84M。


## 后续优化

现在系统已经记录每笔原始交易其后产生的每笔交易，但暂时还没有可供详细查询的页面。

另外灰尘交易聚合后再分散的交易，不会和原始交易做对应，因为灰尘交易可能是多个原始交易产生的，无法对应。


